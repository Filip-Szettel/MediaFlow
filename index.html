<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFmpeg Studio - Zaawansowane GUI</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-layout" id="appLayout">
        <!-- Sidebar Navigation (Vertical Tabs) -->
        <aside class="sidebar glass tab" id="sidebar">
            <div class="logo">
                <i class="fas fa-video"></i>
                <span>FFmpeg Studio</span>
            </div>
            <ul class="nav-menu">
                <li>
                    <button class="tablinks active" onclick="openTab(event, 'pending')" id="defaultOpen">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Do wgrania</span>
                    </button>
                </li>
                <li>
                    <button class="tablinks" onclick="openTab(event, 'uploads')">
                        <i class="fas fa-folder-open"></i>
                        <span>Przed konwersją</span>
                    </button>
                </li>
                <li>
                    <button class="tablinks" onclick="openTab(event, 'converted')">
                        <i class="fas fa-check-circle"></i>
                        <span>Po konwersji</span>
                    </button>
                </li>
                <li>
                    <button class="tablinks" onclick="openTab(event, 'settings')">
                        <i class="fas fa-cog"></i>
                        <span>Ustawienia</span>
                    </button>
                </li>
            </ul>
            <button class="sidebar-toggle" id="sidebarToggle" title="Zwiń/rozwiń pasek boczny">
                <i class="fas fa-bars"></i>
            </button>
        </aside>

        <!-- Header -->
        <header class="header" id="header">
            <div class="section-title">
                <i class="fas fa-home"></i>
                <span id="currentTitle">Do wgrania</span>
            </div>
            <div class="header-actions">
                <input type="text" class="search-input" id="globalSearch" placeholder="Szukaj plików...">
                <button class="btn btn-secondary" onclick="refreshLists()">
                    <i class="fas fa-refresh"></i> Odśwież
                </button>
            </div>
        </header>

        <!-- Main Content (Tab Content Container) -->
        <main class="main-content tab-content-container" id="mainContent">
            <!-- Pending Tab -->
            <div id="pending" class="tabcontent active section">
                <div class="upload-zone" id="uploadZone">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Przeciągnij pliki lub kliknij, aby wybrać</h3>
                    <p style="color: var(--text-secondary); margin-top: 0.5rem;">Obsługiwane: MP4, AVI, MP3, JPG i inne formaty multimedialne</p>
                    <input type="file" id="fileInput" multiple style="display: none;">
                    <button class="upload-btn" id="uploadBtn">
                        <i class="fas fa-plus"></i> Wybierz pliki
                    </button>
                    <div class="upload-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="uploadProgressFill"></div>
                        </div>
                    </div>
                </div>
                <div class="section-header">
                    <div class="section-stats">
                        <span id="pendingCount">0 plików</span>
                    </div>
                </div>
                <div id="pendingList" class="files-grid"></div>
                <div id="pendingEmpty" class="empty-state" style="display: none;">
                    <i class="fas fa-folder-open"></i>
                    <p>Brak plików do wgrania. Dodaj je za pomocą przycisku powyżej!</p>
                </div>
            </div>

            <!-- Uploads Tab -->
            <div id="uploads" class="tabcontent section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-folder-open"></i> Pliki przed konwersją
                    </h2>
                    <div class="section-stats">
                        <span id="uploadsCount">0 plików</span>
                    </div>
                    <div class="batch-actions">
                        <button class="btn btn-secondary" onclick="selectAll('uploads')">
                            <i class="fas fa-check-square"></i> Zaznacz wszystkie
                        </button>
                        <button class="btn btn-primary batch-convert" onclick="batchConvert()" style="display: none;">
                            <i class="fas fa-magic"></i> Konwertuj zaznaczone
                        </button>
                        <button class="btn btn-danger batch-delete" onclick="batchDelete('uploads')" style="display: none;">
                            <i class="fas fa-trash"></i> Usuń zaznaczone
                        </button>
                    </div>
                </div>
                <div id="uploadsList" class="files-grid"></div>
                <div id="uploadsEmpty" class="empty-state" style="display: none;">
                    <i class="fas fa-folder"></i>
                    <p>Brak plików do konwersji. Wgraj je z zakładki "Do wgrania".</p>
                </div>
            </div>

            <!-- Converted Tab -->
            <div id="converted" class="tabcontent section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-check-circle"></i> Pliki po konwersji
                    </h2>
                    <div class="section-stats">
                        <span id="convertedCount">0 plików</span>
                    </div>
                    <div class="batch-actions">
                        <button class="btn btn-secondary" onclick="selectAll('converted')">
                            <i class="fas fa-check-square"></i> Zaznacz wszystkie
                        </button>
                        <button class="btn btn-success batch-download" onclick="batchDownload()" style="display: none;">
                            <i class="fas fa-download"></i> Pobierz zaznaczone
                        </button>
                        <button class="btn btn-danger batch-delete" onclick="batchDelete('converted')" style="display: none;">
                            <i class="fas fa-trash"></i> Usuń zaznaczone
                        </button>
                    </div>
                </div>
                <div id="convertedList" class="files-grid"></div>
                <div id="convertedEmpty" class="empty-state" style="display: none;">
                    <i class="fas fa-trophy"></i>
                    <p>Brak skonwertowanych plików. Rozpocznij konwersję!</p>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tabcontent section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-cog"></i> Ustawienia
                    </h2>
                </div>
                <div class="glass" style="padding: 2rem; border-radius: var(--border-radius);">
                    <h3>Domyślne opcje konwersji</h3>
                    <p>Tutaj możesz ustawić domyślne wartości dla konwersji. (Implementacja w backendzie)</p>
                    <!-- Dodaj formę dla ustawień -->
                </div>
            </div>
        </main>
    </div>

    <!-- Drop Zone Overlay -->
    <div id="dropZone" class="drop-zone">
        <div class="drop-zone-content">
            <i class="fas fa-cloud-upload-alt drop-icon"></i>
            <p>Upuść pliki tutaj, aby dodać do kolejki</p>
        </div>
    </div>

    <!-- Convert Modal -->
    <div id="convertModal" class="modal">
        <div class="modal-content glass">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-magic"></i> Opcje konwersji FFmpeg
                </h3>
                <button class="close">&times;</button>
            </div>
            <form id="convertForm">
                <div class="form-group">
                    <label for="format">Format wyjściowy</label>
                    <select id="format">
                        <option value="mp4">MP4 (H.264/AAC)</option>
                        <option value="webm">WebM (VP9/Opus)</option>
                        <option value="avi">AVI (MPEG-4)</option>
                        <option value="mp3">MP3 (Audio only)</option>
                        <option value="wav">WAV (Audio only)</option>
                        <option value="gif">GIF (Animated)</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="resolution">Rozdzielczość</label>
                        <input type="text" id="resolution" placeholder="1920x1080">
                    </div>
                    <div class="form-group">
                        <label for="crf">CRF (18-28)</label>
                        <input type="number" id="crf" min="18" max="28" value="23">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bitrate">Bitrate wideo</label>
                        <input type="text" id="bitrate" placeholder="2000k">
                    </div>
                    <div class="form-group">
                        <label for="audioBitrate">Bitrate audio</label>
                        <input type="text" id="audioBitrate" placeholder="128k">
                    </div>
                </div>
                <div class="form-group">
                    <label for="advanced">Zaawansowane opcje (np. -vf crop=...)</label>
                    <input type="text" id="advanced" placeholder="Opcjonalnie: -vf scale=1280:720">
                </div>
                <button type="submit" class="convert-submit">
                    <i class="fas fa-play"></i> Rozpocznij konwersję
                </button>
                <div class="convert-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="convertProgressFill"></div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="main.js"></script>
</body>
</html>
